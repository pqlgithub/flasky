<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Print Purchase</title>
	<style type="text/css">
		@page {
			size: A4;
			margin: 1cm;
		}
		@font-face {
           font-family: simsun;
           src: url("http://s3.mixpus.com/static/fonts/simsun.ttf");  /* 字体路径 */
        }
        body {
           font-family: simsun;
        }
		.table {
			border: 1px solid #9c9c9c;
			table-layout：fixed;
		}
		.table td,
		.table th {
			background-color: #fff !important;
			line-height: 20px;
			font-size: 12px;
			padding-left: 3px;
			padding-top: 3px;
			word-wrap: break-word;
			word-break: break-all;
		}
		.table td.title-label {
			width: 150px;
			font-weight: bold;
		}
		.table .table-header {
			text-align: center;
		}
		.site-logo {
			font-size: 16px;
			line-height: 25px;
			font-weight: bold;
		}
		.purchase-code {
			padding-top: 10px;
			color: black;
			font-weight: bold;
		}
		.bh {
			margin-bottom: 10px;
		}
		.ph {
			margin-top: 10px;
		}
		.center {
			text-align: center;
			padding-right: 0;
			padding-left: 0;
		}
		.right {
			text-align: right;
		}
		.table td.info {
			width: 300px;
		}
		.amount {
			line-height: 25px;
			padding-left: 5px;
			padding-top: 5px;
			font-weight: bold;
		}
	</style>
</head>

<body>
	{% for purchase in purchase_list %}
	<div id="content_{{ loop.index }}">
		<div class="site-logo">
			{{ current_site.company_name }}
		</div>

		<table class="bh">
			<tr>
				<td width="160px">
					<div class="purchase-code">
						<label>{{ title_attrs.serial_no }}:</label>
					</div>
				</td>
				<td>
					<div class="purchase-code">
						<label>{{ purchase.serial_no }}</label>
					</div>
				</td>
				<td class="add-date">
					<label>{{ title_attrs.date }}:</label> {{ purchase.created_at|timestamp2string }} <br>
					<label>{{ title_attrs.status }}:</label> {{ purchase.status_label[2] }}
				</td>
			</tr>
		</table>

		<table class="table">
			<tr>
				<td colspan="2" class="table-header">
					<label>{{ title_attrs.supplier_info }}</label>
				</td>
				<td colspan="2" class="table-header">
					{{ title_attrs.warehouse_info }}
				</td>
			</tr>
			<tr>
				<td class="title-label">
					<label>{{ title_attrs.supplier }}：</label>
				</td>
				<td>
					{{ purchase.supplier.short_name }}
				</td>
				<td class="title-label">
					<label>{{ title_attrs.warehouse_name }}：</label>
				</td>
				<td>
					{{ purchase.warehouse.name }}
				</td>
			</tr>
			<tr>
				<td class="title-label">
					<label>{{ title_attrs.contact_name }}：</label>
				</td>
				<td>
					{{ purchase.supplier.contact_name }}
				</td>
				<td class="title-label">
					<label>{{ title_attrs.contact_name }}：</label>
				</td>
				<td>
					{{ purchase.warehouse.username }}
				</td>
			</tr>
			<tr>
				<td class="title-label">
					<label>{{ title_attrs.phone }}：</label>
				</td>
				<td>
					{{ purchase.supplier.phone }}
				</td>
				<td class="title-label">
					<label>{{ title_attrs.phone }}：</label>
				</td>
				<td>
					{{ purchase.warehouse.phone }}
				</td>
			</tr>
			<tr>
				<td class="title-label">
					<label>{{ title_attrs.address }}：</label>
				</td>
				<td>
					{{ purchase.supplier.address|break_line(15) }}
				</td>
				<td class="title-label">
					<label>{{ title_attrs.address }}：</label>
				</td>
				<td>
					{{ purchase.warehouse.address|break_line(15) }}
				</td>
			</tr>
			<tr>
				<td class="title-label">
					<label>{{ title_attrs.email }}：</label>
				</td>
				<td>

				</td>
				<td class="title-label">
					<label>{{ title_attrs.email }}:</label>
				</td>
				<td>
					{{ purchase.warehouse.email }}
				</td>
			</tr>
			<tr>
				<td colspan="4">
					<label>{{ title_attrs.remark }}：</label> {{ purchase.remark }}
				</td>
			</tr>
		</table>


		<table class="table ph">
			<tr>
				<td class="center">
					{{ title_attrs.sn }}
				</td>
				<td class="center">
					{{ title_attrs.product_info }}
				</td>
				<td class="center">
					{{ title_attrs.price }}
				</td>
				<td class="center">
					{{ title_attrs.quantity }}
				</td>
				<td class="center">
					{{ title_attrs.arrival_quantity }}
				</td>
				<td class="center">
					{{ title_attrs.subtotal }}
				</td>
			</tr>
			{% for item in purchase.products %}
			<tr>
				<td class="center" width="80px">
					{{ loop.index }}
				</td>
				<td class="info">
					{{ item.sku_serial_no }} <br>
					{{ item.sku.product.name }}
				</td>
				<td class="center">
					{{ item.cost_price }} {{ current_site.currency }}
				</td>
				<td class="center">
					{{ item.quantity }}
				</td>
				<td class="center">
					{{ item.in_quantity }}
				</td>
				<td class="center">
					{{ item.cost_price*item.quantity  }} {{ current_site.currency }}
				</td>
			</tr>
			{% endfor %}
		</table>

		<table class="ph">
			<tr>
				<td class="center amount">
					<label>{{ title_attrs.express_no }}：</label> {{ purchase.express_name|supress_none }} {{ purchase.express_no|supress_none }}
				</td>
				<td class="right amount">
					<label>{{ title_attrs.freight }}：</label> {{ purchase.freight }} {{ current_site.currency }}<br>
					<label>{{ title_attrs.other_charge }}：</label> {{ purchase.extra_charge }} {{ current_site.currency }}<br>
					<label>{{ title_attrs.total_amount }}：</label> {{ purchase.total_amount+purchase.freight+purchase.extra_charge }} {{ current_site.currency }}
				</td>
			</tr>
		</table>

	</div>
	<pdf:nextpage />
	{% endfor %}
</body>
</html>