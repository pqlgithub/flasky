{% extends pjax("layout/base.html") %}

{% block after_jquery %}
<script type="text/javascript">
	$(function () {
		mixpus.init_page_layout();


	});
</script>
{% endblock %}


{% block mainbar %}
<div class="form-page">
	<h2 class="page-header">
		{{ _('Wx App') }}
		<span class="pull-right">
            <button type="submit" form="shop-form" class="btn btn-icon btn-success" data-toggle="tooltip" data-original-title="{{ _('Save') }}">
				<i class="glyphicon glyphicon-floppy-save"></i>
			</button>
		</span>
	</h2>

    <div class="alert">
        <i class="fa fa-info-circle"></i> 如使用中发现接口有异常，请点击 <a href="">重新授权</a> 试试。
    </div>

    <form id="shop-form" class="form-horizontal" action="" method="post">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" >
        <ul class="nav nav-tabs" role="tablist">
            <li class="active">
                <a href="#general" id="general-tab" role="tab" data-toggle="tab" aria-controls="general" aria-expanded="true">
                    微信小程序授权
                </a>
            </li>
            <li>
                <a href="#data" id="data-tab" role="tab" data-toggle="tab" aria-controls="data" aria-expanded="true">
                    小程序支付设置
                </a>
            </li>
        </ul>

        <div class="tab-content m-t-30">
            <div id="general" class="active tab-pane fade in" role="tabpanel" aria-labelledby="general-tab">
                {% if auth_status %}
                    授权成功，app_id {{ wx_mini_app.nick_name }}
                {% else %}
                <div class="card no-border">
                    <h3 class="title">开启小程序店铺</h3>
                    <p class="summary m-t-25 m-b-25">
                        一键生成小程序店铺，快速抢占10亿微信流量红利，占据社交电商高地<br>
                        助您抢鲜一步进行新零售营销。
                    </p>
                    <a href="{{ url_for('main.wxapp_authorize') }}" class="btn btn-mixpus btn-lg" target="_blank">
                        开始小程序授权
                    </a>
                </div>
                {% endif %}
            </div>

            <div id="data" class="tab-pane fade in" role="tabpanel" aria-labelledby="data-tab">

            </div>
        </div>

    </form>

</div>
{% endblock %}