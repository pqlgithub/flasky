<table class="table table-bordered m-t-20">
	<thead>
		<tr>
			<th class="text-center">{{ _('Image') }}</th>
			<th class="text-center">{{ _('Serial No.') }}</th>
			<th class="text-center">{{ _('Mode/Color') }}</th>
			<th class="text-center">{{ _('Price') }}</th>
			<th class="text-center">{{ _('Stock Quantity') }}</th>
			<th class="text-center">{{ _('69 Codes') }}</th>
			<th class="text-center">{{ _('Weight') }}</th>
			<th>{{ _('Remark') }}</th>
			<th class="text-right">{{ _('Action') }}</th>
		</tr>
	</thead>
	<tbody>
	{% for sku in product_skus %}
	<tr id="tr_sku_{{ sku.serial_no }}">
		<td class="text-center">
			<img src="{{ sku.cover.view_url }}" width="60px">
		</td>
		<td class="text-center">
			{{ sku.serial_no }}
		</td>
		<td class="text-center">
			{% if sku.s_model %}
			<label class="label label-warning">
				{{ sku.s_model }}
			</label>
			{% endif %}
			{% if sku.s_color %}
			<label class="label label-default">
				{{ sku.s_color }}
			</label>
			{% endif %}
		</td>
		<td class="text-center">
            {% if sku.sale_price > 0 %}
                <span class="sale-price">{{ sku.sale_price|round(precision=2) }}</span>
                <span class="price">{{ sku.price|round(precision=2) }}</span>
            {% else %}
                <span class="sale-price">{{ sku.price|round(precision=2) }}</span>
            {% endif %}
		</td>
		<td class="text-center">
			{{ sku.stock_quantity }}
		</td>
		<td class="text-center">
			<span class="text-mixpus">{{ sku.id_code|supress_none }}</span>
		</td>
		<td class="text-center">
			{{ sku.s_weight}}
		</td>
		<td>
			{{ sku.remark }}
		</td>
		<td class="text-right">
			<a href="{{ url_for('main.edit_sku', rid=product.serial_no, s_id=sku.id) }}" class="ajax-edit-sku btn-link m-r-10" data-toggle="tooltip" data-original-title="{{ _('Edit') }}">
				{{ _('Edit') }}
			</a>
			<a href="{{ url_for('main.delete_sku', rid=sku.serial_no) }}" class="ajax-delete-sku btn-link" data-toggle="tooltip" data-original-title="{{ _('Delete') }}">
				{{ _('Remove') }}
			</a>
		</td>
	</tr>
	{% endfor %}
	</tbody>
</table>

<script type="text/javascript">
	$('.ajax-edit-sku').click(function (e) {
		var $btn = $(this), post_url=$(this).attr('href');

		$('#sku-modal').remove();

		$.ajax({
			url: post_url,
			dataType: 'html',
			beforeSend: function() {
				$btn.prop('disabled', true);
			},
			complete: function() {
				$btn.prop('disabled', false);
			},
			success: function(html) {
				$('body').append('<div id="sku-modal" role="dialog" class="modal">' + html + '</div>');

				$('#sku-modal').modal('show');
			}
		});

		return false;
	});

	$('.ajax-delete-sku').click(function () {
		var post_url = $(this).attr('href');
		$.post(post_url, {'csrf_token': mixpus.csrf_token}, function (result) {
			if (result.success) {
				$('#tr_sku_'+ result.data.id).remove();
			}
		}, 'json');
		return false;
	});
</script>