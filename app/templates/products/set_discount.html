{% extends pjax("layout/base.html") %}

{% block after_jquery %}
<script type="text/javascript">
	$(function () {
		mixpus.init_page_layout();
	});
</script>
{% endblock %}

{% block mainbar %}
<div class="form-page">
	<div class="page-header">
		{% if mode == 'create' %}
			{{ _('Add Discount Templet') }}
		{% else %}
			{{ _('Edit Discount Templet') }}
		{% endif %}

		<div class="pull-right">
			<button type="submit" form="discount-form" class="btn btn-icon btn-mixpus" data-toggle="tooltip" data-original-title="{{ _('Save') }}">
				<i class="fa fa-save"></i>
			</button>
			<a href="{{ url_for('main.show_discount_templets') }}" class="pjax btn btn-icon btn-default" data-toggle="tooltip" data-original-title="{{ _('Cancel') }}">
				<i class="fa fa-reply"></i>
			</a>
		</div>
	</div>

	<form id="discount-form" class="form-horizontal" action="" method="post">
		<input type="hidden" name="csrf_token" value="{{ csrf_token() }}" >

		<div class="form-group">
            <label class="col-sm-2 control-label">{{ _('Discount Name') }}:</label>
			<div class="col-sm-6">
				<p class="form-control-static"><strong>{{ discount_templet.name }}</strong></p>
			</div>
		</div>

        <div class="form-group">
            <label class="col-sm-2 control-label">{{ _('Default Discount') }}:</label>
			<div class="col-sm-6">
				<p class="form-control-static text-mixpus"><strong>{{ discount_templet.default_discount }}%</strong></p>
			</div>
		</div>

        <div class="form-group">
            <label class="col-sm-2 control-label">{{ _('By Type') }}:</label>
			<div class="col-sm-6">
				<p class="form-control-static"><strong>{{ discount_templet.type_label[1] }}</strong></p>
			</div>
		</div>

        <div class="form-group">
			<div class="col-sm-8">
                {% if discount_templet.type == 1 %}
				<table class="table table-bordered table-striped table-hover">
                    <thead>
                    <tr>
                        <th class="col-sm-6">{{ _('Category Name') }}</th>
                        <th class="text-right">{{ _('Discount Value') }} (%)</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for c in categories %}
                    <tr>
                        <td>
                            {{ c.name|safe }}
                            <input type="hidden" name="categories[]" value="{{ c.id }}" />
                        </td>
                        <td>
                            <input type="text" name="discount_{{ c.id }}" class="form-control" value="{{ selected_items.get(c.id, '') }}" />
                        </td>
                    </tr>
                    {% endfor %}
                    </tbody>
                </table>
                {% endif %}

                {% if discount_templet.type == 2 %}
				<table class="table">
                    <thead>
                    <tr>
                        <th class="col-sm-6">{{ _('Brand Name') }}</th>
                        <th>{{ _('Discount Value') }} (%)</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for b in brands %}
                    <tr>
                        <td>
                            {{ b.name|safe }}
                            <input type="hidden" name="brands[]" value="{{ b.id }}" />
                        </td>
                        <td>
                            <input type="text" name="discount_{{ b.id }}" class="form-control" value="{{ selected_items.get(b.id, '') }}" />
                        </td>
                    </tr>
                    {% endfor %}
                    </tbody>
                </table>
                {% endif %}

			</div>
		</div>
	</form>

</div>
{% endblock %}