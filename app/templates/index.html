{% extends "layout/base.html" %}

{% block private_js %}
<!-- 引入 ECharts 文件 -->
<script src="{{ url_for('static', filename='js/echarts.min.js') }}" type="text/javascript"></script>
{% endblock %}

{% block jquery %}
{#<script type="text/javascript">#}
	// 基于准备好的dom，初始化echarts实例
	var world_map_chart = echarts.init(document.getElementById('world-map'));

	// 指定图表的配置项和数据
	var option = {
		title: {
			text: 'Order for the last 30 days'
		},
		tooltip: {},
		legend: {
			data:['销量']
		},
		xAxis: {
			data: ["消费电子",'智能产品', '家居', '厨房', "衬衫", "羊毛衫","雪纺衫","裤子","高跟鞋","袜子"]
		},
		yAxis: {},
		series: [{
			name: '销量',
			type: 'bar',
			data: [5, 20, 24, 18, 50, 34, 36, 10, 5, 20, 24, 18, 50, 18, 50, 34, 36, 10, 34, 36, 10, 10, 20, 18, 50, 34, 36, 10, 10, 20]
		}]
	};

	// 使用刚指定的配置项和数据显示图表。
	// world_map_chart.setOption(option);

{#</script>#}
{% endblock %}

{% block sidebar %}
<div class="list-group">
	<div class="list-group-header">
		{{ current_site.company_abbr|default('Y') }} {{ _('Dashboard') }}
	</div>
	<a href="#" class="list-group-item active">
		{{ _('Dashboard') }}
	</a>
	<a href="#" class="list-group-item disabled">
		{{ _('Tasks') }}
	</a>
	<a href="#" class="list-group-item disabled">
		{{ _('Helpers') }}
	</a>
	<a href="#" class="list-group-item disabled">
		{{ _('Logs') }}
	</a>
</div>
{% endblock %}

{% block mainbar %}
<div class="page-list">
	<h2 class="page-header">{{ _('Dashboard') }}</h2>
	<div class="row">
		<div class="col-md-3">
			<div class="card">
				<div class="card-block">
					<h2 class="card-title text-danger">
						{{ total_revenue[0]|default(0)|round(2) }}
						<span class="rate text-default">
							{{ current_site.currency }}
						</span>
					</h2>
					<h5 class="m-b-10">Total Revenue</h5>
				</div>
			</div>
		</div>
		<div class="col-md-3">
			<div class="card">
				<div class="card-block">
					<h2 class="card-title text-danger">
						{{ total_order_count }}
						<span class="rate hidden text-danger">
							<i class="glyphicon glyphicon-arrow-up"></i> 22.5%
						</span>
					</h2>
					<h5 class="m-b-10">Total Orders</h5>
				</div>
			</div>
		</div>
		<div class="col-md-3">
			<div class="card">
				<div class="card-block">
					<h2 class="card-title text-danger">
						{{ total_product_count }}
						<span class="rate hidden text-success">
							<i class="glyphicon glyphicon-arrow-down"></i> 22.5%
						</span>
					</h2>
					<h5 class="m-b-10">Total Products</h5>
				</div>
			</div>
		</div>
		<div class="col-md-3">
			<div class="card">
				<div class="card-block">
					<h2 class="card-title text-danger">
						{{ total_stock_quantity[0] }}
						<span class="rate hidden text-danger">
							<i class="glyphicon glyphicon-arrow-up"></i> 22.5%
						</span>
					</h2>
					<h5 class="m-b-10">Total Stocks</h5>
				</div>
			</div>
		</div>
	</div>

	<div class="row">
		<div class="col-md-8">
			<h3 class="sub-header">{{ _('Latest Orders') }}</h3>
			<div class="table-responsive">
				<table class="table table-bordered">
					<thead>
						<tr>
							<th>{{ _('Order ID') }}</th>
							<th class="text-center">{{ _('Customer「Country」') }}</th>
							<th class="text-right">{{ _('Date Added') }}</th>
							<th class="text-right">{{ _('Total Amount') }}</th>
							<th class="text-right">{{ _('Status') }}</th>
							<th class="text-right">{{ _('Action') }}</th>
						</tr>
					</thead>
					<tbody>
						{% for order in top_orders %}
						<tr>
							<td>
								<span class="text-danger">{{ order.serial_no }}</span>
							</td>
							<td class="text-center">
								{{ order.buyer_name }} {% if order.buyer_country %}{{ order.buyer_country }}{% endif %}
							</td>
							<td class="text-right">
								{{ order.created_at|timestamp2string() }}
							</td>
							<td class="text-right">
								{{ order.total_amount }} {{ current_site.currency }}
							</td>
							<td class="text-right">
								<span class="indicator {{ order.status_label[2] }}">{{ order.status_label[1] }}</span>
							</td>
							<td class="text-right">
								<a href="{{ url_for('main.preview_order', sn=order.serial_no) }}" class="btn btn-link">
									{{ _('View') }}
								</a>
							</td>
						</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
		<div class="col-md-4">
			{% if new_products %}
			<h3 class="sub-header">{{ _('New Items') }}</h3>
			<div class="card">
				<img class="card-img-top" src="{{ new_products.cover.view_url }}">
				<div class="card-block">
					<h4 class="card-title">{{ new_products.name }}</h4>
					<p class="card-text">{{ new_products.supplier.name }} - {{ new_products.cost_price }} {{ current_site.currency }}</p>
					<a href="#" class="card-link">View</a>
				</div>
			</div>
			{% endif %}
			<h3 class="sub-header">{{ _('Top Stores') }}</h3>
			<h3 class="sub-header">{{ _('Monthly Winner') }}</h3>
		</div>
	</div>

</div>
{% endblock %}


